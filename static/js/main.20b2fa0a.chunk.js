(this.webpackJsonpamelia=this.webpackJsonpamelia||[]).push([[0],{13:function(e,t,n){e.exports={widgetsListItem:"WidgetsList_widgetsListItem__3cuk3",widgetsListItemHidden:"WidgetsList_widgetsListItemHidden__1Mm2F",widgetsListItemUpcoming:"WidgetsList_widgetsListItemUpcoming__3OSMS",widgetsListItemUpcomingTitle:"WidgetsList_widgetsListItemUpcomingTitle__3xdQL",widgetsListTitle:"WidgetsList_widgetsListTitle__TPgSP",widgetsListSubtitle:"WidgetsList_widgetsListSubtitle__1RJzT"}},17:function(e,t,n){e.exports={sidebar:"Sidebar_sidebar__1vzZB",isSidebarOpen:"Sidebar_isSidebarOpen__3Kzj9",sidebarInnerContainer:"Sidebar_sidebarInnerContainer__TcUtL",sidebarInnerContainerOpen:"Sidebar_sidebarInnerContainerOpen__2I6Xj",sidebarCloseIcon:"Sidebar_sidebarCloseIcon__1ZZWu"}},205:function(e,t,n){},206:function(e,t,n){},208:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(35),r=n.n(i),s=n(55),c=n.n(s),o=n(81),d=n.n(o),l=n(82),u=n.n(l),b="isLocalStorageVerified",m="true",g="amelia-state",v=[{title:"Add",key:"add"},{title:"About",key:"about"},{title:"Config",key:"config"}],j=[{name:"countdown",title:"Countdown",status:1},{name:"weather",title:"Weather",status:0},{name:"timezone",title:"Timezone Converter",status:-1}],h={ADD:1},p={ADD_COUNTDOWN:10,ADD_WEATHER:20},O=n(7),f=n(39),w=n(80),x=n(2),_=n(3);var y=function(){function e(){Object(x.a)(this,e),this.isLocalStorageAvailable=void 0,this.internalStorage=void 0,this.length=void 0,this.isLocalStorageAvailable=function(){if("undefined"!==typeof window&&window.localStorage)try{if(window.localStorage.setItem(b,m),window.localStorage.getItem(b)===m)return!0}catch(e){return!1}return!1}(),this.internalStorage={},this.length=Object.keys(this.internalStorage).length}return Object(_.a)(e,[{key:"clear",value:function(){this.isLocalStorageAvailable?localStorage.clear():this.internalStorage={},this.length=0}},{key:"getItem",value:function(e){return this.isLocalStorageAvailable?localStorage.getItem(e):Object.prototype.hasOwnProperty.call(this.internalStorage,e)?this.internalStorage[e]:null}},{key:"key",value:function(e){if(this.isLocalStorageAvailable)return localStorage.key(e);var t=Object.keys(this.internalStorage);return t.length>0&&e<t.length?(t.sort(),t[e]):null}},{key:"removeItem",value:function(e){this.isLocalStorageAvailable?(localStorage.removeItem(e),this.length=localStorage.length):(Object.prototype.hasOwnProperty.call(this.internalStorage,e)&&delete this.internalStorage[e],this.length=Object.keys(this.internalStorage).length)}},{key:"setItem",value:function(e,t){this.isLocalStorageAvailable?(localStorage.setItem(e,t),this.length=localStorage.length):(this.internalStorage[e]=t,this.length=Object.keys(this.internalStorage).length)}}],[{key:"getInstance",value:function(){return"undefined"===typeof window?new e:(e.instance||(e.instance=new e),e.instance)}}]),e}();y.instance=void 0;var S=n(54);"undefined"===typeof Proxy&&Object(S.b)();var I={widgets:[{type:"countdown",enabled:!0,data:{events:[{id:"ba4d-13dbf795d755",name:"Christmas",date:"2021-12-25T05:00:00.000Z",background:"christmas-bg.jpg"}]}}],sidebar:{isOpen:!1,activeMenu:null,activeView:null}},C=Object(S.a)((function(e,t){switch(t.type){case"addNewWidget":e.widgets.push(t.widget);break;case"toggleSidebar":e.sidebar.isOpen=!e.sidebar.isOpen;break;case"setActiveMenu":e.sidebar.activeMenu=t.activeMenu;break;case"setActiveView":e.sidebar.activeView=t.activeView;break;case"addNewCountdownEvent":var n=e.widgets.find((function(e){return"countdown"===e.type}));n&&n.data.events.push(t.event);break;case"removeWidgetItem":var a=e.widgets.find((function(e){return e.type===t.widgetType}));if("countdown"===t.widgetType){var i=null===a||void 0===a?void 0:a.data.events.findIndex((function(e){return e.id===t.uuid}));-1!==i&&(null===a||void 0===a||a.data.events.splice(i,1))}else if("weather"===t.widgetType){var r=null===a||void 0===a?void 0:a.data.locations.findIndex((function(e){return e.id===t.uuid}));-1!==r&&(null===a||void 0===a||a.data.locations.splice(r,1))}break;case"addNewWeatherLocation":var s=e.widgets.find((function(e){return"weather"===e.type}));if(s)s.data.locations.push(t.location);else{var c={type:"weather",enabled:!0,data:{locations:[Object(f.a)({},t.location)]}};e.widgets.push(c)}}return e})),k=n(1);function N(e){var t=y.getInstance().getItem(g);return t?JSON.parse(t):e}var L=Object(w.debounce)((function(e){y.getInstance().setItem(g,JSON.stringify(e))}),500,{leading:!1,trailing:!0,maxWait:1e3});function T(e,t){var n=C(e,t);return L(n),n}var A=Object(a.createContext)(I),W=Object(a.createContext)((function(){return console.warn("Calling default dispatch is a no-op!")})),V=function(e){var t=e.children,n=e.initialStateOverride,i=Object(f.a)({},I),r=Object(a.useReducer)(T,null!==n&&void 0!==n?n:i,N),s=Object(O.a)(r,2),c=s[0],o=s[1];return Object(k.jsx)(W.Provider,{value:o,children:Object(k.jsx)(A.Provider,{value:c,children:t})})};V.defaultProps={initialStateOverride:void 0};var D=function(){return Object(a.useContext)(A)},M=function(){return Object(a.useContext)(W)},E=n(21),F=n.n(E);function z(e){var t=M(),n=D().sidebar,a=Object(k.jsx)(c.a,{});switch(e.configKey){case"add":a=Object(k.jsx)(c.a,{fontSize:"small"});break;case"about":a=Object(k.jsx)(d.a,{fontSize:"small"});break;case"config":a=Object(k.jsx)(u.a,{fontSize:"small"})}var i=n.isOpen&&e.configKey===n.activeMenu?"".concat(F.a.menubarItem," ").concat(F.a.menubarItemActive):"".concat(F.a.menubarItem);return Object(k.jsxs)("div",{"data-testid":e.configKey,className:i,onClick:function(){return n.isOpen||t({type:"toggleSidebar"}),void t({type:"setActiveMenu",activeMenu:e.configKey})},children:[a,Object(k.jsx)("span",{className:F.a.menuBarItemText,children:e.name})]})}var P=function(){return Object(k.jsx)("div",{className:F.a.menubar,children:v.map((function(e){return Object(k.jsx)(z,{name:e.title,configKey:e.key},e.key)}))})},U=n(92),B=n.n(U),R=n(83),H=n.n(R),K=n(84),q=n.n(K),J=n(85),Z=n.n(J),G=n(13),Q=n.n(G);function X(e){var t=null;switch(e){case"countdown":t=Object(k.jsx)(H.a,{fontSize:"small"});break;case"weather":t=Object(k.jsx)(q.a,{fontSize:"small"});break;case"timezone":t=Object(k.jsx)(Z.a,{fontSize:"small"})}return t}var Y=function(){var e=M();return Object(k.jsxs)("div",{className:Q.a.widgetsList,children:[Object(k.jsx)("h2",{className:Q.a.widgetsListTitle,children:"New widget"}),Object(k.jsx)("p",{className:Q.a.widgetsListSubtitle,children:"Select a widget from the list below"}),j.map((function(t){var n=1===t.status?"".concat(Q.a.widgetsListItem):-1===t.status?"".concat(Q.a.widgetsListItemHidden):"".concat(Q.a.widgetsListItem," ").concat(Q.a.widgetsListItemUpcoming);return Object(k.jsxs)("div",{"data-testid":t.name,className:n,onClick:function(){var n;n=t.name,e({type:"setActiveView",activeView:"add_".concat(n)})},children:[X(t.name),Object(k.jsx)("span",{children:t.title}),0===t.status&&Object(k.jsx)("span",{className:Q.a.widgetsListItemUpcomingTitle,children:"Upcoming!"})]},t.name)}))]})},$=n(91),ee=n.n($),te=n(42),ne=n(95),ae=n(221),ie=n(27),re=n.n(ie),se=n(57),ce=n.n(se);var oe=function(){var e=M(),t=Object(ne.a)({initialValues:{eventName:"",eventDate:""},validationSchema:te.a({eventName:te.b().min(2,"Must be 2 characters or more").required("Event name is required"),eventDate:te.b().required("Event date is required")}),onSubmit:function(t){e({type:"addNewCountdownEvent",event:{id:Object(ae.a)(),name:t.eventName,date:re()(t.eventDate).toISOString(),background:""}}),e({type:"setActiveView",activeView:null})}});return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)("form",{onSubmit:t.handleSubmit,autoComplete:"off",children:[Object(k.jsx)("input",{type:"text",id:"eventName",name:"eventName",placeholder:"Event name",onChange:t.handleChange,value:t.values.eventName}),t.touched.eventName&&t.errors.eventName?Object(k.jsx)("div",{className:ce.a.formError,children:t.errors.eventName}):null,Object(k.jsx)("input",{type:"date",id:"eventDate",name:"eventDate",placeholder:"Event date",onChange:t.handleChange,value:t.values.eventDate}),t.touched.eventDate&&t.errors.eventDate?Object(k.jsx)("div",{className:ce.a.formError,children:t.errors.eventDate}):null,Object(k.jsx)("button",{type:"submit",children:"Submit"})]})})},de=n(40),le=n.n(de);var ue=function(){var e=M();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{"data-testid":"go-back",className:le.a.backContainer,onClick:function(){e({type:"setActiveView",activeView:null})},children:[Object(k.jsx)(ee.a,{fontSize:"small"}),Object(k.jsx)("span",{children:"Go Back"})]}),Object(k.jsx)("h2",{className:le.a.title,children:"New countdown"}),Object(k.jsx)("p",{className:le.a.subtitle,children:"Add the details for your countdown widget"}),Object(k.jsx)(oe,{})]})},be=n(17),me=n.n(be);function ge(e){var t=0;return null===e.activeMenu?t=0:t+=h[e.activeMenu.toUpperCase()],e.activeView&&null!==e.activeView?t+=p[e.activeView.toUpperCase()]:t+=0,t}function ve(e){switch(e){case 0:return null;case 1:return Object(k.jsx)(Y,{});case 11:return Object(k.jsx)(ue,{})}}var je=function(){var e=D().sidebar,t=M(),n=e.isOpen?"".concat(me.a.sidebar," ").concat(me.a.isSidebarOpen):"".concat(me.a.sidebar),a=e.isOpen?"".concat(me.a.sidebarInnerContainer," ").concat(me.a.sidebarInnerContainerOpen):"".concat(me.a.sidebarInnerContainer);return Object(k.jsxs)("div",{className:n,children:[Object(k.jsx)("div",{"data-testid":"close-sidebar",className:me.a.sidebarCloseIcon,onClick:function(){e.isOpen&&(t({type:"toggleSidebar"}),t({type:"setActiveMenu",activeMenu:null}),t({type:"setActiveView",activeView:null}))},children:Object(k.jsx)(B.a,{fontSize:"small"})}),Object(k.jsx)("div",{className:a,children:ve(ge(e))})]})},he=n(94),pe=n.n(he),Oe=n(93),fe=n.n(Oe),we=n(41),xe=n.n(we);var _e=function(e){var t=M();return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)("div",{style:e.style,className:xe.a.mainContainer,children:[e.children,e.editAction&&Object(k.jsx)("div",{className:xe.a.actionEdit,children:Object(k.jsx)(fe.a,{fontSize:"small"})}),Object(k.jsx)("div",{className:xe.a.actionRemove,children:Object(k.jsx)(pe.a,{"data-testid":e.uuid,fontSize:"small",onClick:function(){var n,a;n=e.uuid,a=e.widgetType,t({type:"removeWidgetItem",uuid:n,widgetType:a})}})})]})})},ye=n(58),Se=n.n(ye);var Ie=function(e){var t="";try{t=function(e,t){switch(t){case"days":return"%daysToken% days".replace("%daysToken%",e.days);case"days+hours":return"%daysToken% days %hoursToken% hours".replace("%daysToken%",e.days).replace("%hoursToken%",e.hours)}}(function(e){re()(e).isValid()||(e=(new Date).toISOString());var t=(new Date).toISOString(),n=(re()(e).diff(t)/1e3/60/60/24).toString().split("."),a=Object(O.a)(n,2),i=a[0],r=a[1],s=(24*parseFloat("0.".concat(r))).toString().split("."),c=Object(O.a)(s,2),o=c[0],d=c[1],l=(60*parseFloat("0.".concat(d))).toString().split(".");return{days:i,hours:o,minutes:Object(O.a)(l,1)[0]}}(e.eventDate),"days+hours")}catch(n){}return Object(k.jsxs)("div",{className:Se.a.lightText,children:[Object(k.jsx)("h3",{children:e.eventName}),Object(k.jsx)("p",{className:Se.a.separatorWord,children:"in"}),Object(k.jsx)("h2",{children:t})]})};n(205);function Ce(){var e=D().widgets.map((function(e){return"countdown"===e.type?e.data.events.map((function(e){return Object(k.jsx)(_e,{uuid:e.id,widgetType:"countdown",editAction:!1,children:Object(k.jsx)(Ie,{eventName:e.name,eventDate:e.date})},e.id)})):"weather"===e.type?e.data.locations.map((function(e){return null})):null}));return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)("div",{className:"mainContainer",children:[Object(k.jsx)(P,{}),Object(k.jsx)(je,{}),Object(k.jsxs)("div",{className:"container",style:{backgroundImage:"url(./default.jpg)",backgroundSize:"cover"},children:[Object(k.jsx)("main",{className:"main",children:e}),Object(k.jsx)("span",{className:"imageAttribution",children:"Photo by Lum3n from Pexels"})]})]})})}var ke=function(){var e=D().sidebar,t=M();return Object(a.useEffect)((function(){e.isOpen&&t({type:"toggleSidebar"})}),[t,e.isOpen]),Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(V,{initialStateOverride:I,children:Object(k.jsx)(Ce,{})})})},Ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,222)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),r(e),s(e)}))};n(206);r.a.render(Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(ke,{})}),document.getElementById("root")),Ne()},21:function(e,t,n){e.exports={menubar:"Menubar_menubar__3t4V-",menubarItem:"Menubar_menubarItem__1xRj2",menubarItemActive:"Menubar_menubarItemActive__HlnFI",menubarItemIcon:"Menubar_menubarItemIcon__2C58g",menuBarItemText:"Menubar_menuBarItemText__3GUgP"}},40:function(e,t,n){e.exports={backContainer:"CountdownFormAddView_backContainer__2w8Bd",title:"CountdownFormAddView_title__1ctjc",subtitle:"CountdownFormAddView_subtitle__2uuqy"}},41:function(e,t,n){e.exports={mainContainer:"Widget_mainContainer__1HOLg",actionRemove:"Widget_actionRemove__3i1rR",actionEdit:"Widget_actionEdit__22v7V"}},57:function(e,t,n){e.exports={formError:"CountdownForm_formError__2t6Ep"}},58:function(e,t,n){e.exports={lightText:"CountdownWidget_lightText__2ebWe",separatorWord:"CountdownWidget_separatorWord__2UeZ8",biggerText:"CountdownWidget_biggerText__2Y7nn"}}},[[208,1,2]]]);
//# sourceMappingURL=main.20b2fa0a.chunk.js.map